<!--pages/teacher/class-management/class-management.wxml-->
<view class="class-management-container">
  <view class="title-section">
    <text class="page-title">班级管理</text>
  </view>
  
  <view class="class-list">
    <block wx:for="{{classList}}" wx:key="id" wx:for-item="classItem">
      <view class="class-item">
        <view class="class-info-left">
          <!-- 学院和年级信息 -->
          <text class="class-department">{{classItem.department}}{{classItem.grade}}</text>
          
          <!-- 班级名称 -->
          <text class="class-name">{{classItem.className}}</text>
          
          <!-- 课程列表 - 显示课程名称 -->
          <view class="course-list" wx:if="{{classItem.courseNames && classItem.courseNames.trim() !== ''}}">
            <text class="course-label">课程：</text>
            <text class="course-names">{{classItem.courseNames}}</text>
          </view>
        </view>
        
        <view class="class-info-right">
          <!-- 学生数量 -->
          <text class="class-meta">{{classItem.studentCount || 0}}名学生</text>
          <!-- 查看详情按钮 -->
          <button class="view-details-btn" bindtap="viewClassDetails" data-class-id="{{classItem.id}}">查看详情</button>
        </view>
      </view>
    </block>
    
    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{classList.length === 0}}">
      <text>暂无班级信息</text>
    </view>
  </view>
  
  <!-- 添加班级按钮 -->
  <view class="add-class-btn" bindtap="openAddClassModal">
    <text class="btn-text">+ 添加班级</text>
  </view>
  
  <!-- 添加班级弹窗 -->
  <view class="modal" wx:if="{{showAddClassModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">添加班级</text>
        <view class="close-btn" bindtap="closeAddClassModal">×</view>
      </view>
      <view class="modal-body">
        <view class="form-item">
          <text class="label">班级名称</text>
          <input class="input" type="text" placeholder="请输入班级名称" value="{{newClass.className}}" bindinput="inputClassInfo" data-field="className" />
        </view>
        <view class="form-item">
          <text class="label">年级</text>
          <input class="input" type="text" placeholder="请输入年级" value="{{newClass.grade}}" bindinput="inputClassInfo" data-field="grade" />
        </view>
        <view class="form-item">
          <text class="label">系别</text>
          <input class="input" type="text" placeholder="请输入系别" value="{{newClass.department}}" bindinput="inputClassInfo" data-field="department" />
        </view>
      </view>
      <view class="modal-footer">
        <button class="btn cancel-btn" bindtap="closeAddClassModal">取消</button>
        <button class="btn confirm-btn" bindtap="addClass">确定</button>
      </view>
    </view>
  </view>
</view>